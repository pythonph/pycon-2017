'use strict';var d3=window.d3;var speakersList=d3.select('.speakers-list');var speakers=speakersList.selectAll('.speaker-info');var cols=5;var rowHeight=200;var size=128;var zf=0.2;var _speakersList$node$ge=speakersList.node().getBoundingClientRect(),width=_speakersList$node$ge.width,height=_speakersList$node$ge.height;var data=d3.range(speakers.size()).map(function(i){var col=i%cols;var row=Math.floor(i/cols);var d={x:col*width/cols+(width/cols-size)/2,y:Math.sin(col)*height/10+row*rowHeight,z:zf*(Math.pow(-1,row)*col-(Math.pow(-1,row)<1?0:cols))/cols};return d});speakers.data(data).style('transform',function(_ref){var x=_ref.x,y=_ref.y,z=_ref.z;return'translate3d('+x+'px, '+y+'px, '+z+'px)'}).select('.label').style('transform',function(d){return'scale('+(1-d.z)+')'});function renderSchedule(root){var range=JSON.parse(root.node().dataset.jsRange);var schedule=JSON.parse(root.node().dataset.jsSchedule);var svg=root.select('svg').append('g').attr('transform','translate(50, 20)');var _root$node$getBoundin=root.node().getBoundingClientRect(),width=_root$node$getBoundin.width;var availWidth=width-70;var y=d3.scaleTime().domain([new Date(range[0]),new Date(range[range.length-1])]).range([0,960]);var yAxis=d3.axisLeft(y).ticks(d3.timeHour);svg.append('g').call(yAxis);svg.append('g').selectAll('rect').data(schedule['Common']).enter().append('rect').attr('width',availWidth).attr('height',function(d){return Math.abs(y(new Date(d.end))-y(new Date(d.start)))}).attr('x',10).attr('y',function(d){return y(new Date(d.start))}).style('fill',d3.schemeCategory20c[0]);root.append('div').classed('labels',true).selectAll('.label').data(schedule['Common']).enter().append('div').classed('label',true).style('transform',function(d){return'translate(70px, '+(24+y(new Date(d.start)))+'px)'}).style('font-size','80%').style('width',availWidth+'px').text(function(d){return d.topic});var tracks=Object.keys(schedule).filter(function(a){return a!=='Common'});var trackWidth=availWidth/tracks.length;tracks.forEach(function(track,i){svg.append('g').selectAll('rect').data(schedule[track]).enter().append('rect').attr('x',10+i*trackWidth).attr('y',function(d){return y(new Date(d.start))}).attr('width',trackWidth).attr('height',function(d){return Math.abs(y(new Date(d.end))-y(new Date(d.start)))}).style('fill',d3.schemeCategory20c[i+1]);root.append('div').classed('labels',true).selectAll('.label').data(schedule[track]).enter().append('div').classed('label',true).style('transform',function(d){return'translate('+(70+i*trackWidth)+'px, '+(24+y(new Date(d.start)))+'px)'}).style('font-size','80%').style('width',trackWidth-20+'px').text(function(d){return d.topic})})}renderSchedule(d3.select('[data-js-day-1]'));renderSchedule(d3.select('[data-js-day-2]'));
